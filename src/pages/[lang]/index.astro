---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Hero from '../../components/Hero.astro';
import Services from '../../components/Services.astro';
import Showcase from '../../components/Showcase.astro';
import Reviews from '../../components/Reviews.astro';
import Contact from '../../components/Contact.astro'; // El nuevo componente Wrapper
import Footer from '../../components/Footer.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';
import { languages } from '../../i18n/ui';

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params;
const t = useTranslations(lang as 'en' | 'es');

// --- DATOS: GALERÍA (SHOWCASE) ---
// Definimos las etiquetas de los botones de filtro aquí
const showcaseLabels = lang === 'en' ? {
  title: "Our Work Speaks for Itself",
  subtitle: "From precision behind the walls to beautiful luxury finishes. Explore our recent projects in Jacksonville.",
  tabAll: "All",
  tabBath: "Bathrooms",
  tabRepipe: "Repiping",
  tabHeater: "Heaters",
  tabDrain: "Drains",
  tabFilter: "Filtration"
} : {
  title: "Nuestro Trabajo Habla por Sí Solo",
  subtitle: "Desde la precisión técnica detrás de las paredes hasta hermosos acabados de lujo. Explora nuestros proyectos recientes.",
  tabAll: "Todos",
  tabBath: "Baños",
  tabRepipe: "Tuberías",
  tabHeater: "Calentadores",
  tabDrain: "Drenajes",
  tabFilter: "Filtros"
};

// --- DATOS: RESEÑAS (REVIEWS) ---
// Puedes mover esto a un archivo JSON o i18n si prefieres, pero aquí funciona bien.
const reviewsData = lang === 'en' ? [
  {
    name: "Sarah J.",
    stars: 5,
    text: "Saved us in the middle of the night! The water heater burst and they were here in 30 mins. Professional and clean."
  },
  {
    name: "Michael T.",
    stars: 5,
    text: "Incredible bathroom remodel. They handled everything from the new PEX piping to the vanity installation. Looks amazing."
  },
  {
    name: "David R.",
    stars: 5,
    text: "Best price I found for a whole house repipe. Honest work, no hidden fees. Highly recommended."
  }
] : [
  {
    name: "Sarah J.",
    stars: 5,
    text: "¡Nos salvaron en medio de la noche! El calentador de agua explotó y llegaron en 30 minutos. Profesionales y muy limpios."
  },
  {
    name: "Michael T.",
    stars: 5,
    text: "Increíble remodelación de baño. Se encargaron de todo, desde la nueva tubería PEX hasta la instalación del mueble. Se ve increíble."
  },
  {
    name: "David R.",
    stars: 5,
    text: "El mejor precio que encontré para un cambio de tubería completo. Trabajo honesto, sin tarifas ocultas. Muy recomendado."
  }
];

---

<Layout title={t('site.title')}>
  
  <Header />
  
  <main>
    
    <Hero />
    
    <Services 
      title={t('services.title')}
      subtitle={t('services.subtitle')}
    />
    
    <Showcase labels={showcaseLabels} />
    
    <Reviews 
      title={t('reviews.title')}
      subtitle={t('reviews.subtitle')}
      reviews={reviewsData}
    />
    
    <Contact />
    
  </main>

  <Footer />
  
</Layout>